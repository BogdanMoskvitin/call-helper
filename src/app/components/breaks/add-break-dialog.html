<h1 mat-dialog-title>Создание смены</h1>

<form [formGroup]="breakForm" (submit)="submit()">
    <div mat-dialog-content>
        <div class="form">
            <mat-form-field appearance="fill">
                <mat-label>Дата</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="date" [min]="today">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <mat-slide-toggle formControlName="all_group_members">
                Все участники группы
            </mat-slide-toggle>

            <mat-form-field appearance="fill" *ngIf="!breakForm.value.all_group_members">
                <mat-label>Участники</mat-label>
                <mat-select formControlName="members" multiple>
                    <mat-option *ngFor="let member of membersList" [value]="member.id">
                        {{member?.employee?.user?.full_name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <input 
                    matInput
                    [format]="24"
                    formControlName="break_start"
                    [ngxMatTimepicker]="pickerBreakStart"
                    placeholder="Начало обеда"
                    readonly
                />
                <mat-icon 
                    matSuffix
                    (click)="pickerBreakStart.open()"
                >
                    watch_later
                </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker 
                color="accent"
                #pickerBreakStart
            ></ngx-mat-timepicker>

            <mat-form-field>
                <input 
                    matInput
                    [format]="24"
                    formControlName="break_end"
                    [ngxMatTimepicker]="pickerBreakEnd"
                    placeholder="Конец обеда"
                    readonly
                />
                <mat-icon 
                    matSuffix
                    (click)="pickerBreakEnd.open()"
                >
                    watch_later
                </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker 
                color="accent"
                #pickerBreakEnd
            ></ngx-mat-timepicker>

            <mat-form-field appearance="fill">
                <mat-label>Минимальное количество активных сотрудников</mat-label>
                <input matInput formControlName="min_active">
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>Максимальная продолжительность обеда</mat-label>
                <input matInput formControlName="break_max_duration">
            </mat-form-field>

            <mat-slide-toggle formControlName="remember_default_data">
                Запомнить настройки смены
            </mat-slide-toggle>
        </div>
    </div>

    <div mat-dialog-actions>
        <button mat-button mat-dialog-close>Отмена</button>
        <button mat-stroked-button color="primary" type="submit" [disabled]="breakForm.invalid">Создать</button>
    </div>
</form>