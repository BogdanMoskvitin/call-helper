<div class="container">
    <button mat-stroked-button color="primary" (click)="openAddGroupDialog()" *ngIf="organisation?.can_manage">Создать группу</button>

    <h3>Список групп</h3>

    <mat-button-toggle-group>
        <mat-button-toggle checked (click)="filter('all')">Все</mat-button-toggle>
        <mat-button-toggle (click)="filter('my')">Мои</mat-button-toggle>
        <mat-button-toggle (click)="filter('managed')">Управляемые</mat-button-toggle>
    </mat-button-toggle-group>
    
    <table mat-table [dataSource]="groupsList" class="mat-elevation-z8">
        <!-- Name -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Название </th>
            <td mat-cell *matCellDef="let element" class="table__link" [routerLink]="['../../group', element.id]"> {{element.name}} </td>
        </ng-container>
    
        <!-- Director -->
        <ng-container matColumnDef="manager">
            <th mat-header-cell *matHeaderCellDef> Менеджер </th>
            <td mat-cell *matCellDef="let element"> {{element.manager.user.full_name}} </td>
        </ng-container>
    
        <!-- Pax -->
        <ng-container matColumnDef="pax">
            <th mat-header-cell *matHeaderCellDef> Кол-во участников </th>
            <td mat-cell *matCellDef="let element"> {{element.pax}} </td>
        </ng-container>
    
        <!-- Created at -->
        <ng-container matColumnDef="created_at">
            <th mat-header-cell *matHeaderCellDef> Дата создания </th>
            <td mat-cell *matCellDef="let element"> {{element.created_at | date: 'dd.MM.YYYY hh:mm'}} </td>
        </ng-container>
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr 
            mat-row 
            *matRowDef="let row; columns: displayedColumns;" 
            [ngClass]="{'green': row.can_manage, 'blue': row.is_member}"
        ></tr>
    </table>
    
    <h3 *ngIf="!groupsList.length">Список пуст</h3>
</div>